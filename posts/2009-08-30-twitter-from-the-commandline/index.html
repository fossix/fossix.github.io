<!doctype html><html><head>
<link rel=stylesheet href=/syntax.css>
<link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous>
<link href=/fossix.css rel=stylesheet media=screen>
<title>
Fossix - Twitter From The Command Line
</title>
<script data-ad-client=ca-pub-0086577717613608 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset=utf-8>
</head>
<body><nav class="navbar navbar-expand-lg navbar-dark bg-dark">
<a class=navbar-brand href=/>
<img src=/site-logo.png width=40 height=45 class="d-inline-block align-top" alt>
</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav mr-auto">
<li class="nav-item active">
<a class=nav-link href=/>Fossix
<span class=sr-only>(current)</span>
</a>
</li>
</ul>
<form class="form-inline my-2 my-lg-0" id=search>
<input class="form-control mr-sm-2" type=search placeholder=Search aria-label=Search id=searchString name=searchString>
<button class="btn btn-outline-success my-2 my-sm-0" type=submit name=googleSearchName value=Search>Search</button>
</form>
</div>
</nav>
<div class=container-fluid style=margin-top:25px>
<div class=row>
<div class=col-md-2>
<div class="list-group list-group-flush">
<a href=/ class="list-group-item list-group-item-action">
Home
</a>
<a href=/categories/snippets class="list-group-item list-group-item-action">
Snippets
</a>
<a href=/categories/blogs class="list-group-item list-group-item-action">
Blogs
</a>
<a href=/categories/articles class="list-group-item list-group-item-action">
Articles
</a>
<a href=/archive/ class="list-group-item list-group-item-action">
Archive
</a>
</div>
</div>
<div class=col-md-6>
<div class="row content-title">
<h1>Twitter From The Command Line</h1>
</div>
<div class="alert alert-light">
<span class=badge>Posted on: 18 March, 2017</span>
<div class=float-right>
<span> By santosh</span>
</div>
</div>
<hr>
<p>Twitter has become popular with many of us recently. Most of us are too lazy to
use the web interface to do a update. So there are options like twitter for
firefox, twitgin for pidgin and so on. But still most of are CLI oriented and
rarely visit the GUI. I am one such guy. So when I came to hear about Twitter
API, I was excited and started to write a simple python script to update to
Twitter. You can find the version 1 of the script in this post.</p>
<h1 id=how-to-use-clt>How to use clt?</h1>
<p>You can tweet using the following command:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>$ </span>clt <span class=o>[</span>-u username<span class=o>]</span> <span class=o>[</span>-p password<span class=o>]</span> your tweet message here
</code></pre></div><p>Note that the username is not required if it is set <code>TWEETUSER</code> environment
variable. But you can give explicitly if you want to send as a different user.</p>
<p>The following will get the specified userâ€™s last tweet update.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>$ </span>clt <span class=o>[</span>-u username<span class=o>]</span> -l
</code></pre></div><p>You can always refer the options using</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=gp>$ </span>clt --help
</code></pre></div><p>The python code for clt is here.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=ch>#!/usr/bin/python</span>
<span class=c1># -*- coding: utf-8 -*-</span>

<span class=c1>###############################################################################</span>
<span class=c1>#     Twitter from the command line</span>
<span class=c1>#     Copyright (C) 2009 Santosh Sivaraj </span>
<span class=c1>#</span>
<span class=c1>#     This program is free software; you can redistribute it and/or modify it</span>
<span class=c1># under the terms of the GNU General Public License as published by the Free</span>
<span class=c1># Software Foundation; either version 2 of the License, or (at your option) any</span>
<span class=c1># later version.</span>
<span class=c1>#</span>
<span class=c1>#     This program is distributed in the hope that it will be useful, but</span>
<span class=c1># WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span>
<span class=c1># FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more</span>
<span class=c1># details.</span>
<span class=c1>#</span>
<span class=c1>#     You should have received a copy of the GNU General Public License along</span>
<span class=c1># with this program; if not, write to the Free Software Foundation, Inc., 59</span>
<span class=c1># Temple Place, Suite 330, Boston, MA 02111-1307 USA</span>
<span class=c1>#</span>
<span class=c1># Command line twitter</span>
<span class=c1># clt version 1.0</span>
<span class=c1># Sun Aug 30 2009 - Santosh - Released version 1.0</span>
<span class=c1>###############################################################################</span>

<span class=kn>import</span> <span class=nn>twitter</span>
<span class=kn>import</span> <span class=nn>getpass</span>
<span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>import</span> <span class=nn>getopt</span>
<span class=kn>import</span> <span class=nn>os</span>

<span class=n>tweetapi</span> <span class=o>=</span> <span class=n>twitter</span><span class=o>.</span><span class=n>Api</span><span class=p>()</span>

<span class=n>VERSION</span> <span class=o>=</span> <span class=s2>&#34;1.0&#34;</span>
<span class=n>authreq</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1>#set as one if we need authentication for any operations</span>
<span class=n>password</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>

<span class=k>def</span> <span class=nf>printversion</span><span class=p>():</span>
    <span class=nb>print</span> <span class=s2>&#34;clt (Command line tweeting) 1.0&#34;</span>
    <span class=nb>print</span> <span class=s2>&#34;Copyright (C) 2009 Santosh, fossix.org&#34;</span>
    <span class=nb>print</span> <span class=s2>&#34;This is free software; see the source for copying conditions. &#34;</span><span class=p>,</span>
    <span class=nb>print</span> <span class=s2>&#34;There is NO </span><span class=se>\n</span><span class=s2>Warranty; not even for MERCHANTABILITY or FITNESS &#34;</span><span class=p>,</span>
    <span class=nb>print</span> <span class=s2>&#34;FOR A PARTICULAR PURPOSE.&#34;</span>

<span class=k>def</span> <span class=nf>usage</span><span class=p>():</span>
    <span class=nb>print</span> <span class=s2>&#34;What are you doing now:</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>,</span>
    <span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\t</span><span class=s2>clt [-u username] [-p password] tweetmsg&#34;</span>
    <span class=nb>print</span> <span class=s2>&#34;Get last tweet update:</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>,</span>
    <span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\t</span><span class=s2>clt [-u username] -l&#34;</span>
    <span class=nb>print</span> <span class=s2>&#34;Get recent tweet updates from all friends:</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>,</span>
    <span class=nb>print</span> <span class=s2>&#34;</span><span class=se>\t</span><span class=s2>clt [-u username] -p password]-a&#34;</span>
    <span class=nb>print</span> <span class=s2>&#34;clt --version&#34;</span>
    <span class=nb>print</span> <span class=s2>&#34;clt --help&#34;</span>

<span class=k>def</span> <span class=nf>auth</span><span class=p>(</span><span class=n>username</span><span class=p>):</span>
    <span class=k>global</span> <span class=n>password</span><span class=p>,</span> <span class=n>authreq</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>username</span><span class=p>:</span>
        <span class=nb>print</span> <span class=s2>&#34;No username supplied or no environment variable &#39;TWEETUSER&#39;!&#34;</span>
        <span class=nb>print</span> <span class=p>(</span><span class=s2>&#34;Use &#39;clt --help&#39; for more info&#34;</span><span class=p>)</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
    <span class=c1># We will reach here only for operations that need authentication</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>password</span><span class=p>:</span>
        <span class=n>password</span> <span class=o>=</span> <span class=n>getpass</span><span class=o>.</span><span class=n>getpass</span><span class=p>()</span>
    <span class=n>p</span> <span class=o>=</span> <span class=n>twitter</span><span class=o>.</span><span class=n>Api</span><span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>password</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>p</span>

<span class=k>def</span> <span class=nf>fall</span><span class=p>(</span><span class=n>username</span><span class=p>):</span>
    <span class=n>a</span> <span class=o>=</span> <span class=n>auth</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>a</span><span class=p>:</span>
        <span class=nb>print</span> <span class=s2>&#34;Invalid password or username&#34;</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>

    <span class=n>status</span> <span class=o>=</span> <span class=n>a</span><span class=o>.</span><span class=n>GetFriendsTimeline</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>status</span><span class=p>:</span>
        <span class=nb>print</span> <span class=s2>&#34;</span><span class=si>{0}</span><span class=s2>: </span><span class=si>{1}</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>s</span><span class=o>.</span><span class=n>user</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>s</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>main</span><span class=p>(</span><span class=n>argv</span><span class=p>):</span>
    <span class=k>global</span> <span class=n>password</span><span class=p>,</span> <span class=n>authreq</span>
    <span class=n>username</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;TWEETUSER&#34;</span><span class=p>)</span>
    <span class=n>otheropts</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=n>last</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1>#last status message</span>
    <span class=n>getall</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>opts</span><span class=p>,</span> <span class=n>args</span> <span class=o>=</span> <span class=n>getopt</span><span class=o>.</span><span class=n>getopt</span><span class=p>(</span><span class=n>argv</span><span class=p>,</span> <span class=s2>&#34;u:p:la&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;help&#34;</span><span class=p>,</span> <span class=s2>&#34;version&#34;</span><span class=p>])</span>
    <span class=k>except</span> <span class=n>getopt</span><span class=o>.</span><span class=n>GetoptError</span><span class=p>:</span>
        <span class=n>usage</span><span class=p>()</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>

<span class=c1># Parse all the command line arguments</span>
    <span class=k>for</span> <span class=n>opt</span><span class=p>,</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>opts</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>opt</span> <span class=o>==</span> <span class=s2>&#34;--help&#34;</span><span class=p>:</span>
            <span class=n>usage</span><span class=p>()</span>
            <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>();</span>
    <span class=k>if</span> <span class=n>opt</span> <span class=o>==</span> <span class=s2>&#34;--version&#34;</span><span class=p>:</span>
        <span class=n>printversion</span><span class=p>()</span>
            <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>()</span>
        <span class=k>elif</span> <span class=n>opt</span> <span class=o>==</span> <span class=s1>&#39;-u&#39;</span><span class=p>:</span>
            <span class=n>username</span> <span class=o>=</span> <span class=n>arg</span>
        <span class=k>elif</span> <span class=n>opt</span> <span class=o>==</span> <span class=s1>&#39;-p&#39;</span><span class=p>:</span>
            <span class=n>password</span> <span class=o>=</span> <span class=n>arg</span>
        <span class=k>elif</span> <span class=n>opt</span> <span class=o>==</span> <span class=s1>&#39;-l&#39;</span><span class=p>:</span>
            <span class=n>last</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=k>elif</span> <span class=n>opt</span> <span class=o>==</span> <span class=s1>&#39;-a&#39;</span><span class=p>:</span>
            <span class=n>getall</span> <span class=o>=</span> <span class=mi>1</span>

    <span class=n>tweet</span> <span class=o>=</span> <span class=s2>&#34; &#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>tweet</span> <span class=o>!=</span> <span class=s1>&#39;&#39;</span><span class=p>:</span>
        <span class=n>authreq</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>

    <span class=k>if</span> <span class=n>getall</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>fall</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>();</span>

    <span class=k>if</span> <span class=n>last</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>laststat</span> <span class=o>=</span> <span class=n>tweetapi</span><span class=o>.</span><span class=n>GetUserTimeline</span><span class=p>(</span><span class=n>username</span><span class=p>,</span> <span class=n>count</span> <span class=o>=</span> <span class=mi>1</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>l</span> <span class=ow>in</span> <span class=n>laststat</span><span class=p>:</span>
            <span class=nb>print</span> <span class=n>l</span><span class=o>.</span><span class=n>text</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>()</span>

    <span class=n>p</span> <span class=o>=</span> <span class=n>auth</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>

    <span class=c1># perform all authentication required operations here</span>
        <span class=c1># --------- other operations -----------#</span>

    <span class=c1># Reach here only to post tweets, else return early.</span>
    <span class=k>if</span> <span class=n>tweet</span> <span class=o>==</span> <span class=s1>&#39;&#39;</span><span class=p>:</span>
        <span class=nb>print</span> <span class=s2>&#34;Tweet what?&#34;</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>

    <span class=n>p</span><span class=o>.</span><span class=n>PostUpdate</span><span class=p>(</span><span class=n>tweet</span><span class=p>)</span>

<span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
    <span class=n>main</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>:])</span>
</code></pre></div>
<hr>
<div class=float-right>
<a href=https://fossix.org/tagscli class="badge badge-dark">CLI</a>
<a href=https://fossix.org/tagstwitter class="badge badge-dark">twitter</a>
</div>
</div><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=/fossix.js></script>
<script src=//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<hr>
<div class=container>
<div class=row>
<div class=mx-auto>
<ul class=nav>
<li class=nav-item>
<a class="nav-link text-muted" href=/about>About</a>
</li>
<li class=nav-item>
<a class="nav-link text-muted" href=/contact/>Contact</a>
</li>
<li class=nav-item>
<a class="nav-link text-muted" href=/privacy/>Privacy Policy</a>
</li>
</ul>
</div>
</div>
<div class=row>
<div class=mx-auto>
<p>Site design and logo and content &copy; fossix.org</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>