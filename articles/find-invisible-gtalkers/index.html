<!doctype html><html><head>
<link rel=stylesheet href=/syntax.css>
<link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous>
<link href=/fossix.css rel=stylesheet media=screen>
<title>
Fossix - Find Invisible Gtalkers!
</title>
<script data-ad-client=ca-pub-0086577717613608 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset=utf-8>
</head>
<body><nav class="navbar navbar-expand-md navbar-dark bg-dark">
<a class=navbar-brand href=/>
<img src=/site-logo.png width=40 height=45 class="d-inline-block align-top" alt>
<span class=front-site-title>Fossix</span>
</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav mr-auto">
<li class=nav-item>
<a href=/categories/snippets class=nav-link>
Snippets
</a>
</li>
<li class=nav-item>
<a href=/categories/blogs class=nav-link>
Blogs
</a>
</li>
<li class=nav-item>
<a href=/categories/articles class=nav-link>
Articles
</a>
</li>
<li class=nav-item>
<a class=nav-link href=/archive/>
Archive
</a>
</li>
</ul>
</div>
</nav>
<div class=container-fluid style=margin-top:25px>
<div class=row>
<div class=col-lg-3>
</div>
<div class="col-lg-6 content">
<h1>Find Invisible Gtalkers!</h1>
<div class=alert-light>
<div class=float-left>
<span class=badge>
5 August, 2010 | sab
</span>
</div>
<div class=float-right>
<a href=https://fossix.org/tags/xmpp class="badge badge-light">#xmpp</a>
<a href=https://fossix.org/tags/gtalk class="badge badge-light">#gtalk</a>
<a href=https://fossix.org/tags/invisible class="badge badge-light">#invisible</a>
</div>
<span class=badge> </span>
</div>
<p>This program below is a simple python script, that will let you find your
buddies who decided to remain invisible (may be you are haunting them
lately). But its now time for you to be more clever than your pal.</p>
<p>Before that check if you have installed the python xmpp package.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=ch>#!/usr/bin/python -Wignore</span>

<span class=kn>import</span> <span class=nn>xmpp</span>
<span class=kn>import</span> <span class=nn>signal</span>
<span class=kn>import</span> <span class=nn>sys</span>
<span class=kn>import</span> <span class=nn>getpass</span>

<span class=c1># catch signals, and exit for Ctrl+C</span>
<span class=k>def</span> <span class=nf>signal_handler</span><span class=p>(</span><span class=n>signal</span><span class=p>,</span> <span class=n>frame</span><span class=p>):</span>
        <span class=nb>print</span> <span class=s1>&#39;Exiting..&#39;</span>
        <span class=n>C</span><span class=o>.</span><span class=n>UnregisterHandler</span><span class=p>(</span><span class=s1>&#39;presence&#39;</span><span class=p>,</span> <span class=n>PresenceHandler</span><span class=p>)</span>
        <span class=n>C</span><span class=o>.</span><span class=n>disconnect</span><span class=p>()</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

<span class=n>signal</span><span class=o>.</span><span class=n>signal</span><span class=p>(</span><span class=n>signal</span><span class=o>.</span><span class=n>SIGINT</span><span class=p>,</span> <span class=n>signal_handler</span><span class=p>)</span>

<span class=c1># Google Talk constants</span>
<span class=n>FROM_GMAIL_ID</span> <span class=o>=</span> <span class=n>raw_input</span><span class=p>(</span><span class=s2>&#34;Your Email: &#34;</span><span class=p>)</span>
<span class=n>GMAIL_PASS</span> <span class=o>=</span> <span class=n>getpass</span><span class=o>.</span><span class=n>getpass</span><span class=p>(</span><span class=s2>&#34;Enter Password:&#34;</span><span class=p>)</span>
<span class=n>GTALK_SERVER</span> <span class=o>=</span> <span class=s2>&#34;gmail.com&#34;</span>

<span class=n>jid</span><span class=o>=</span><span class=n>xmpp</span><span class=o>.</span><span class=n>protocol</span><span class=o>.</span><span class=n>JID</span><span class=p>(</span><span class=n>FROM_GMAIL_ID</span><span class=p>)</span>
<span class=n>C</span><span class=o>=</span><span class=n>xmpp</span><span class=o>.</span><span class=n>Client</span><span class=p>(</span><span class=n>jid</span><span class=o>.</span><span class=n>getDomain</span><span class=p>(),</span><span class=n>debug</span><span class=o>=</span><span class=p>[])</span>

<span class=k>if</span> <span class=ow>not</span> <span class=n>C</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=n>GTALK_SERVER</span><span class=p>,</span><span class=mi>5222</span><span class=p>)):</span>
    <span class=k>raise</span> <span class=ne>IOError</span><span class=p>(</span><span class=s1>&#39;Can not connect to server.&#39;</span><span class=p>)</span>
<span class=k>if</span> <span class=ow>not</span> <span class=n>C</span><span class=o>.</span><span class=n>auth</span><span class=p>(</span><span class=n>jid</span><span class=o>.</span><span class=n>getNode</span><span class=p>(),</span><span class=n>GMAIL_PASS</span><span class=p>):</span>
    <span class=k>raise</span> <span class=ne>IOError</span><span class=p>(</span><span class=s1>&#39;Can not auth with server.&#39;</span><span class=p>)</span>

<span class=n>C</span><span class=o>.</span><span class=n>sendInitPresence</span><span class=p>(</span><span class=n>requestRoster</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>PresenceHandler</span><span class=p>(</span><span class=n>con</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>getType</span><span class=p>()</span> <span class=o>==</span> <span class=s1>&#39;unavailable&#39;</span><span class=p>:</span>
        <span class=nb>print</span> <span class=n>event</span><span class=o>.</span><span class=n>getFrom</span><span class=p>()</span><span class=o>.</span><span class=n>getStripped</span><span class=p>()</span>

<span class=n>C</span><span class=o>.</span><span class=n>RegisterHandler</span><span class=p>(</span><span class=s1>&#39;presence&#39;</span><span class=p>,</span> <span class=n>PresenceHandler</span><span class=p>)</span>

<span class=k>while</span> <span class=n>C</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=mi>1</span><span class=p>):</span>
        <span class=k>pass</span>
</code></pre></div>
</div>
<div class=col-lg-3>
<div>
<h5>You might also like</h5>
<ul style=list-style-type:none>
<li class=box-list><a href=/articles/xmpp-auto-reply-bot/ class=item>XMPP Auto Reply Bot</a></li>
</ul>
</div>
</div><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script>
<script src=/fossix.js></script>
<script src=//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<hr>
<div class=container>
<div class=row>
<div class=mx-auto>
<ul class=nav>
<li class=nav-item>
<a class="nav-link text-muted" href=/about>About</a>
</li>
<li class=nav-item>
<a class="nav-link text-muted" href=/contact/>Contact</a>
</li>
<li class=nav-item>
<a class="nav-link text-muted" href=/privacy/>Privacy Policy</a>
</li>
</ul>
</div>
</div>
<div class=row>
<div class=mx-auto>
<p>Site design and logo and content &copy; fossix.org</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>